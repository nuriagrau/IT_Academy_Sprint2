db.createCollection('orders', {validator: {$jsonSchema: {bsonType: 'object',title: 'orders',required: ['shop','isPaid','isDelivered','client','delivery'],properties:{shop:{bsonType: 'array',items:{title: 'object',required: ['name'],properties:{name:{bsonType: 'string'},adress:{bsonType: 'object',title: 'object',required: ['street','postCode','city/town'],properties:{street:{bsonType: 'string'},postCode:{bsonType: 'string'},city/town:{bsonType: 'string'},county:{bsonType: 'string'}}}}}},orderLines:{bsonType: 'array',items:{title: 'object',required: ['quantity','productType','product','linePrice'],properties:{quantity:{bsonType: 'int'},productType:{enum: ["pizza", "burger", "beverage"]},product:{bsonType: 'object',title: 'object',required: ['id','name','description','unitPrice'],properties:{id:{bsonType: 'objectId'},name:{bsonType: 'string'},description:{bsonType: 'string'},unitPrice:{bsonType: 'decimal'},image:{bsonType: 'binData'},category:{bsonType: 'object',title: 'object',required: ['name'],properties:{name:{bsonType: 'string'}}}}},linePrice:{bsonType: 'int',{§multiply: [quantity], [unitPrice]}}}},description: '{§multiply: [quantity], [unitPrice]}'},totalPrice:{bsonType: 'int',description: '{§add: §[linePrice]}'},isPaid:{bsonType: 'bool'},isDelivered:{bsonType: 'bool'},client:{bsonType: 'object',title: 'object',required: ['id','name'],properties:{id:{bsonType: 'objectId'},name:{bsonType: 'string'},adress:{bsonType: 'object',title: 'object'}}},delivery:{bsonType: 'array',items:{title: 'object',properties:{shop:{bsonType: 'bool'},home:{bsonType: 'array',items:{title: 'object',properties:{deliveryIn:{bsonType: 'object',title: 'object',required: ['street','number','telephone'],properties:{street:{bsonType: 'string'},number:{bsonType: 'string'},floor:{bsonType: 'string'},telephone:{bsonType: 'string'},note:{bsonType: 'string'}}},deliverer:{bsonType: 'string'},deliveredOn:{bsonType: 'date'}}},description: 'if ´delivery`.`shop`= false'}}}}}}}});